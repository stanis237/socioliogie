{% extends 'base.html' %}

{% block title %}Accueil - Plateforme d'Apprentissage en ligne Intelligente{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero" style="background-image: url('/static/IMG/campus_3.jpg');">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1 class="display-4 fw-bold mb-4">Bienvenue sur la Plateforme d'Apprentissage  intelligente</h1>
                <p class="lead mb-4">Apprenez  de manière personnalisée avec l'intelligence artificielle adaptative.</p>
                {% if not user.is_authenticated %}
                <a href="{% url 'register' %}" class="btn btn-light btn-lg me-2">
                    <i class="bi bi-person-plus"></i> Commencer maintenant
                </a>
                <a href="{% url 'login' %}" class="btn btn-outline-light btn-lg">
                    <i class="bi bi-box-arrow-in-right"></i> Se connecter
                </a>
                {% else %}
                <a href="{% url 'course_list' %}" class="btn btn-light btn-lg me-2">
                    <i class="bi bi-book"></i> Explorer les Cours
                </a>
                <a href="{% url 'dashboard' %}" class="btn btn-outline-light btn-lg">
                    <i class="bi bi-speedometer2"></i> Mon Tableau de bord
                </a>
                {% endif %}
            </div>
            <div class="col-lg-6 text-center">
                <i class="bi bi-mortarboard-fill" style="font-size: 15rem; opacity: 0.3;"></i>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="py-5">
    <div class="container">
        <h2 class="text-center mb-5">Fonctionnalités Clés</h2>
        <div class="row g-4">
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 shadow-sm feature-card" data-aos="fade-up" data-aos-delay="0">
                    <div class="card-body text-center">
                        <i class="bi bi-person-badge text-primary" style="font-size: 3rem;"></i>
                        <h5 class="card-title mt-3">Apprentissage Personnalisé</h5>
                        <p class="card-text">Contenu adapté à votre profil, niveau et progression d'apprentissage.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 shadow-sm feature-card" data-aos="fade-up" data-aos-delay="100">
                    <div class="card-body text-center">
                        <i class="bi bi-emoji-smile text-success" style="font-size: 3rem;"></i>
                        <h5 class="card-title mt-3">Analytique Émotionnelle</h5>
                        <p class="card-text">Adaptation du contenu basée sur votre état émotionnel et votre engagement.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 shadow-sm feature-card" data-aos="fade-up" data-aos-delay="200">
                    <div class="card-body text-center">
                        <i class="bi bi-chat-dots text-info" style="font-size: 3rem;"></i>
                        <h5 class="card-title mt-3">Forum Interactif</h5>
                        <p class="card-text">Échangez avec d'autres apprenants et partagez vos connaissances.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 shadow-sm feature-card" data-aos="fade-up" data-aos-delay="300">
                    <div class="card-body text-center">
                        <i class="bi bi-robot text-warning" style="font-size: 3rem;"></i>
                        <h5 class="card-title mt-3">Recommandations IA</h5>
                        <p class="card-text">Suggestions intelligentes de contenu basées sur vos préférences.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Stats Section (if authenticated) -->
{% if user.is_authenticated %}
<section class="bg-light py-5">
    <div class="container">
        <div class="row text-center">
            <div class="col-md-4">
                <h3 class="text-primary">{{ user.profile.points }}</h3>
                <p class="text-muted">Points accumulés</p>
            </div>
            <div class="col-md-4">
                <h3 class="text-success">{{ user.historique.all|length }}</h3>
                <p class="text-muted">Cours complétés</p>
            </div>
            <div class="col-md-4">
                <h3 class="text-info">{{ user.profile.get_level_display }}</h3>
                <p class="text-muted">Niveau actuel</p>
            </div>
        </div>
    </div>
</section>
{% endif %}

<script>
// Animation des cartes de fonctionnalités au scroll
document.addEventListener('DOMContentLoaded', function() {
    const featureCards = document.querySelectorAll('.feature-card');

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('fade-in');
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.1 });

    featureCards.forEach(card => {
        observer.observe(card);
    });

    // Animation de l'icône hero
    const heroIcon = document.querySelector('.bi-mortarboard-fill');
    if (heroIcon) {
        setInterval(() => {
            heroIcon.style.transform = 'scale(1.1)';
            setTimeout(() => {
                heroIcon.style.transform = 'scale(1)';
            }, 500);
        }, 3000);
    }

    // Background image slideshow
    const heroSection = document.querySelector('.hero');
    const images = [
        '/static/IMG/campus_3.jpg',
        '/static/IMG/campus_91.jpg',
        '/static/IMG/evenements_16.jpg'
    ];
    let currentImageIndex = 0;

    setInterval(() => {
        currentImageIndex = (currentImageIndex + 1) % images.length;
        heroSection.style.backgroundImage = `url('${images[currentImageIndex]}')`;
    }, 5000); // Change image every 5 seconds
});
</script>
{% endblock %}
